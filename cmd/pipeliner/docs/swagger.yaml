basePath: /api/pipeliner/v1
definitions:
  entity.AllUsageResponse:
    properties:
      pipelines:
        additionalProperties:
          items:
            type: string
          type: array
        type: object
    type: object
  entity.DebugResult:
    properties:
      block_name:
        type: string
      break_points:
        items:
          type: string
        type: array
      status:
        description: todo define values
        example: run,error,finished,created
        type: string
      task:
        $ref: '#/definitions/entity.EriusTask'
    type: object
  entity.EriusFunc:
    properties:
      block_type:
        enum:
        - python3
        - go
        - internal
        - term
        - scenario
        example: python3
        type: string
      final:
        type: string
      input:
        items:
          $ref: '#/definitions/entity.EriusFunctionValue'
        type: array
      next:
        example: send-data_0
        type: string
      on_false:
        type: string
      on_iter:
        type: string
      on_true:
        type: string
      output:
        items:
          $ref: '#/definitions/entity.EriusFunctionValue'
        type: array
      param_type:
        type: string
      params:
        type: object
      title:
        example: lock-bts
        type: string
      type_id:
        example: approver
        type: string
      x:
        type: integer
      "y":
        type: integer
    type: object
  entity.EriusFunctionList:
    properties:
      funcs:
        items:
          $ref: '#/definitions/script.FunctionModel'
        type: array
      shapes:
        items:
          $ref: '#/definitions/script.ShapeEntity'
        type: array
    type: object
  entity.EriusFunctionValue:
    properties:
      global:
        example: block.some_data
        type: string
      name:
        example: some_data
        type: string
      type:
        example: string
        type: string
    type: object
  entity.EriusScenario:
    properties:
      approved_at:
        example: "2020-07-16T17:10:25.112704+03:00"
        type: string
      author:
        example: testAuthor
        type: string
      comment:
        type: string
      comment_rejected:
        type: string
      created_at:
        example: "2020-07-16T17:10:25.112704+03:00"
        type: string
      hasDraft:
        type: boolean
      id:
        example: 916ad995-8d13-49fb-82ee-edd4f97649e2
        format: uuid
        type: string
      input:
        items:
          $ref: '#/definitions/entity.EriusFunctionValue'
        type: array
      name:
        example: ScenarioName
        type: string
      output:
        items:
          $ref: '#/definitions/entity.EriusFunctionValue'
        type: array
      pipeline:
        properties:
          blocks:
            additionalProperties:
              $ref: '#/definitions/entity.EriusFunc'
            type: object
          entrypoint:
            type: string
        type: object
      status:
        description: 1 - Draft, 2 - Approved, 3 - Deleted, 4 - Rejected, 5 - On Approve
        enum:
        - 1
        - 2
        - 3
        - 4
        - 5
        type: integer
      tags:
        items:
          $ref: '#/definitions/entity.EriusTagInfo'
        type: array
      version_id:
        example: 916ad995-8d13-49fb-82ee-edd4f97649e2
        format: uuid
        type: string
    type: object
  entity.EriusScenarioInfo:
    properties:
      approved_at:
        example: "2020-07-16T17:10:25.112704+03:00"
        type: string
      approver:
        example: testApprover
        type: string
      author:
        example: testAuthor
        type: string
      comment:
        type: string
      comment_rejected:
        type: string
      created_at:
        example: "2020-07-16T17:10:25.112704+03:00"
        type: string
      id:
        example: 916ad995-8d13-49fb-82ee-edd4f97649e2
        format: uuid
        type: string
      last_run:
        example: "2020-07-16T17:10:25.112704+03:00"
        type: string
      last_run_status:
        type: string
      name:
        example: ScenarioName
        type: string
      status:
        description: 1 - Draft, 2 - Approved, 3 - Deleted, 4 - Rejected, 5 - On Approve
        enum:
        - 1
        - 2
        - 3
        - 4
        - 5
        type: integer
      tags:
        items:
          $ref: '#/definitions/entity.EriusTagInfo'
        type: array
      version_history:
        items:
          $ref: '#/definitions/entity.EriusVersionInfo'
        type: array
      version_id:
        example: 916ad995-8d13-49fb-82ee-edd4f97649e2
        format: uuid
        type: string
    type: object
  entity.EriusScenarioList:
    properties:
      drafts:
        description: Черновики
        items:
          $ref: '#/definitions/entity.EriusScenarioInfo'
        type: array
      on_approve:
        description: Сценарии на одобрении
        items:
          $ref: '#/definitions/entity.EriusScenarioInfo'
        type: array
      pipelines:
        description: Согласованные сценарии
        items:
          $ref: '#/definitions/entity.EriusScenarioInfo'
        type: array
      tags:
        description: Теги
        items:
          $ref: '#/definitions/entity.EriusTagInfo'
        type: array
    type: object
  entity.EriusTagInfo:
    properties:
      color:
        type: string
      id:
        example: 916ad995-8d13-49fb-82ee-edd4f97649e2
        format: uuid
        type: string
      isMarker:
        type: boolean
      name:
        type: string
      status:
        description: 1 - Created, 3 - Deleted
        enum:
        - 1
        - 3
        type: integer
    type: object
  entity.EriusTask:
    properties:
      author:
        type: string
      debug:
        type: boolean
      id:
        type: string
      last_changed_at:
        type: string
      name:
        type: string
      parameters:
        additionalProperties: true
        type: object
      started_at:
        type: string
      status:
        type: string
      steps:
        items:
          $ref: '#/definitions/entity.Step'
        type: array
      version_id:
        type: string
      work_number:
        type: string
    type: object
  entity.EriusTasks:
    properties:
      tasks:
        items:
          $ref: '#/definitions/entity.EriusTask'
        type: array
    type: object
  entity.EriusTasksPage:
    properties:
      tasks:
        items:
          $ref: '#/definitions/entity.EriusTask'
        type: array
      total:
        type: integer
    type: object
  entity.EriusVersionInfo:
    properties:
      approved_at:
        example: "2020-07-16T17:10:25.112704+03:00"
        type: string
      approver:
        example: testApprover
        type: string
      author:
        example: testAuthor
        type: string
      created_at:
        example: "2020-07-16T17:10:25.112704+03:00"
        type: string
      version_id:
        example: 916ad995-8d13-49fb-82ee-edd4f97649e2
        format: uuid
        type: string
    type: object
  entity.RunResponse:
    properties:
      errors:
        items:
          type: string
        type: array
      output: {}
      pipeline_id:
        example: 916ad995-8d13-49fb-82ee-edd4f97649e2
        format: uuid
        type: string
      status:
        example: runned
        type: string
      work_number:
        type: string
    type: object
  entity.SchedulerTasksResponse:
    properties:
      result:
        type: boolean
    type: object
  entity.Step:
    properties:
      errors:
        items:
          type: string
        type: array
      has_error:
        type: boolean
      is_finished:
        type: boolean
      name:
        type: string
      state:
        type: object
      steps:
        items:
          type: string
        type: array
      storage:
        additionalProperties: true
        type: object
      time:
        type: string
      type:
        type: string
    type: object
  entity.TaskUpdate:
    properties:
      action:
        enum:
        - approvement
        example: approvement
        type: string
      parameters:
        type: object
    type: object
  entity.UsageResponse:
    properties:
      name:
        description: Имя блока
        type: string
      pipelines:
        items:
          $ref: '#/definitions/entity.UsedBy'
        type: array
      used:
        type: boolean
    type: object
  entity.UsedBy:
    properties:
      id:
        description: ID сценария
        type: string
      name:
        description: Имя сценария
        type: string
    type: object
  handlers.CreateTaskRequest:
    properties:
      parameters:
        additionalProperties: true
        type: object
      version_id:
        type: string
    type: object
  handlers.DebugRunRequest:
    properties:
      action:
        example: step_over,resume
        type: string
      break_points:
        items:
          type: string
        type: array
      work_number:
        type: string
    type: object
  handlers.RunPipelineBody:
    additionalProperties: true
    type: object
  handlers.RunVersionBody:
    additionalProperties: true
    type: object
  handlers.RunVersionsByBlueprintIdRequest:
    properties:
      application_body:
        additionalProperties: true
        type: object
      blueprint_id:
        type: string
      description:
        type: string
    type: object
  handlers.RunVersionsByBlueprintIdResponse:
    properties:
      versions:
        items:
          $ref: '#/definitions/entity.RunResponse'
        type: array
    type: object
  handlers.eriusTaskResponse:
    properties:
      author:
        type: string
      debug:
        type: boolean
      id:
        type: string
      last_changed_at:
        type: string
      name:
        type: string
      parameters:
        additionalProperties: true
        type: object
      started_at:
        type: string
      status:
        type: string
      steps:
        items:
          $ref: '#/definitions/handlers.step'
        type: array
      version_id:
        type: string
      work_number:
        type: string
    type: object
  handlers.httpError:
    properties:
      description:
        type: string
      error:
        type: string
      status_code:
        type: integer
    type: object
  handlers.httpResponse:
    properties:
      data: {}
      status_code:
        type: integer
    type: object
  handlers.step:
    properties:
      errors:
        items:
          type: string
        type: array
      has_error:
        type: boolean
      is_finished:
        type: boolean
      name:
        type: string
      state:
        type: object
      steps:
        items:
          type: string
        type: array
      storage:
        additionalProperties: true
        type: object
      time:
        type: string
      type:
        type: string
    type: object
  script.FunctionModel:
    properties:
      block_type:
        type: string
      id:
        type: string
      inputs:
        items:
          $ref: '#/definitions/script.FunctionValueModel'
        type: array
      next_funcs:
        items:
          type: string
        type: array
      outputs:
        items:
          $ref: '#/definitions/script.FunctionValueModel'
        type: array
      params:
        $ref: '#/definitions/script.FunctionParams'
      shape_type:
        type: integer
      title:
        type: string
    type: object
  script.FunctionParams:
    properties:
      params: {}
      type:
        enum:
        - approver
        - servicedesk_application
        - execution
        example: approver
        type: string
    type: object
  script.FunctionValueModel:
    properties:
      comment:
        type: string
      name:
        type: string
      type:
        type: string
    type: object
  script.ShapeEntity:
    properties:
      icon:
        type: string
      id:
        type: integer
      title:
        type: string
    type: object
host: localhost:8181
info:
  contact: {}
  title: Pipeliner API
  version: "0.1"
paths:
  /api/pipeliner/v1/metrics:
    get:
      description: Метрики
      operationId: metrics
      produces:
      - text/plain
      responses:
        "200":
          description: metrics content
      summary: metrics
      tags:
      - metrics
  /debug/:
    post:
      consumes:
      - application/json
      description: Создать сессию отладки
      operationId: create-debug-task
      parameters:
      - description: New debug task
        in: body
        name: debug
        required: true
        schema:
          $ref: '#/definitions/handlers.CreateTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusTask'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Create debug task
      tags:
      - debug
  /debug/{taskID}:
    get:
      description: Получить debug-задачу
      operationId: debug-task
      parameters:
      - description: work number
        in: path
        name: workNumber
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.DebugResult'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Debug task
      tags:
      - tasks
  /debug/run:
    post:
      consumes:
      - application/json
      description: Начать отладку
      operationId: debug-task-run
      parameters:
      - description: debug request
        in: body
        name: variables
        schema:
          $ref: '#/definitions/handlers.DebugRunRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusTask'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Start debug task
      tags:
      - debug
  /modules:
    get:
      description: Список блоков
      operationId: get-modules
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusFunctionList'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get list of modules
      tags:
      - modules
  /modules/{moduleName}:
    post:
      description: Запустить блок
      operationId: module-usage-by-name
      parameters:
      - description: module name
        in: path
        name: moduleName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.UsageResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Run Module By Name
      tags:
      - modules
  /modules/{moduleName}/usage:
    get:
      description: Сценарии, в которых используется блок
      operationId: module-usage
      parameters:
      - description: module name
        in: path
        name: moduleName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.UsageResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Usage of module in pipelines
      tags:
      - modules
  /modules/usage:
    get:
      description: Блоки и сценарии, в которых они используются
      operationId: modules-usage
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.AllUsageResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get list of modules usage
      tags:
      - modules
  /pipelines:
    get:
      description: Список сценариев
      operationId: list-pipelines
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusScenarioList'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get list of pipelines
      tags:
      - pipeline
    post:
      consumes:
      - application/json
      description: Создать новый сценарий
      operationId: create-pipeline
      parameters:
      - description: New scenario
        in: body
        name: pipeline
        required: true
        schema:
          $ref: '#/definitions/entity.EriusScenario'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusScenario'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Create pipeline
      tags:
      - pipeline
  /pipelines/{pipelineID}:
    delete:
      description: Удалить сценарий
      operationId: delete-pipeline
      parameters:
      - description: Pipeline ID
        in: path
        name: pipelineID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.httpResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Delete Pipeline
      tags:
      - pipeline
    get:
      description: Получить сценарий по ID
      operationId: get-pipeline
      parameters:
      - description: Pipeline ID
        in: path
        name: pipelineID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusScenario'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get pipeline
      tags:
      - pipeline
  /pipelines/{pipelineID}/scheduler-tasks:
    post:
      consumes:
      - application/json
      description: Наличие у сценария активных заданий в шедулере
      operationId: pipeline-scheduler-tasks
      parameters:
      - description: Pipeline ID
        in: path
        name: pipelineID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.SchedulerTasksResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Active scheduler tasks
      tags:
      - pipeline
  /pipelines/{pipelineID}/tags:
    get:
      description: Список тегов сценария
      operationId: get-pipeline-tags
      parameters:
      - description: Pipeline ID
        in: path
        name: pipelineID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/entity.EriusTagInfo'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get Pipeline Tags
      tags:
      - pipeline
      - tags
  /pipelines/{pipelineID}/tags/{ID}:
    delete:
      description: Открепить тег от сценария
      operationId: detach-tag
      parameters:
      - description: Pipeline ID
        in: path
        name: pipelineID
        required: true
        type: string
      - description: Tag ID
        in: path
        name: ID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.httpResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Detach Tag
      tags:
      - pipeline
      - tags
    put:
      description: Прикрепить тег к сценарию
      operationId: attach-tag
      parameters:
      - description: Pipeline ID
        in: path
        name: pipelineID
        required: true
        type: string
      - description: Tag ID
        in: path
        name: ID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusTagInfo'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Attach Tag
      tags:
      - pipeline
      - tags
  /pipelines/version:
    put:
      consumes:
      - application/json
      description: Изменить черновик
      operationId: edit-draft
      parameters:
      - description: New draft
        in: body
        name: draft
        required: true
        schema:
          $ref: '#/definitions/entity.EriusScenario'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusScenario'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Edit Draft
      tags:
      - pipeline
  /pipelines/version/{pipelineID}:
    post:
      consumes:
      - application/json
      description: Создать новую версию сценария
      operationId: create-version
      parameters:
      - description: New version
        in: body
        name: pipeline
        required: true
        schema:
          $ref: '#/definitions/entity.EriusScenario'
      - description: Pipeline ID
        in: path
        name: pipelineID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusScenario'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Create pipeline version
      tags:
      - version
  /pipelines/version/{versionID}:
    delete:
      description: Удалить версию
      operationId: delete-version
      parameters:
      - description: Version ID
        in: path
        name: versionID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.httpResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Delete Version
      tags:
      - version
    get:
      description: Получить версию сценария по ID
      operationId: get-version
      parameters:
      - description: Version ID
        in: path
        name: versionID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusScenario'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get pipeline version
      tags:
      - version
  /run/{pipelineID}:
    post:
      consumes:
      - application/json
      description: Запустить сценарий
      operationId: run-pipeline
      parameters:
      - description: pipeline input
        in: body
        name: variables
        schema:
          $ref: '#/definitions/handlers.RunPipelineBody'
      - description: Pipeline ID
        in: path
        name: pipelineID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.RunResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Run Pipeline
      tags:
      - pipeline
      - run
  /run/version/{versionID}:
    post:
      consumes:
      - application/json
      description: Запустить версию
      operationId: run-version
      parameters:
      - description: pipeline input
        in: body
        name: variables
        schema:
          $ref: '#/definitions/handlers.RunVersionBody'
      - description: Version ID
        in: path
        name: versionID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.RunResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Run Version
      tags:
      - version
      - run
  /run/versions/blueprint_id:
    post:
      consumes:
      - application/json
      description: Запустить все версии c blueprintID и первым блоком sd_application
      operationId: run-versions-by-blueprint-id
      parameters:
      - description: pipeline input
        in: body
        name: variables
        schema:
          $ref: '#/definitions/handlers.RunVersionsByBlueprintIdRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.RunVersionsByBlueprintIdResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Run Version By blueprintID
      tags:
      - version
      - run
  /tags:
    get:
      description: Cписок тегов
      operationId: get-tags
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/entity.EriusTagInfo'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get Tags
      tags:
      - tags
    post:
      consumes:
      - application/json
      description: Создать новый тег
      operationId: create-tag
      parameters:
      - description: New tag
        in: body
        name: tag
        required: true
        schema:
          $ref: '#/definitions/entity.EriusTagInfo'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusTagInfo'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Create Tag
      tags:
      - tags
    put:
      consumes:
      - application/json
      description: Изменить тег
      operationId: edit-tag
      parameters:
      - description: Modified tag
        in: body
        name: tag
        required: true
        schema:
          $ref: '#/definitions/entity.EriusTagInfo'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusTagInfo'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Edit Tag
      tags:
      - tags
  /tags/{ID}:
    delete:
      description: Удалить тег
      operationId: remove-tag
      parameters:
      - description: Tag ID
        in: path
        name: ID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.httpResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Remove Tag
      tags:
      - tags
  /tasks:
    get:
      description: Получить задачи
      operationId: get-tasks
      parameters:
      - description: Pipeline name
        in: query
        name: name
        type: string
      - description: Task IDs
        in: query
        items:
          type: string
        name: taskIDs
        type: array
      - description: Created after
        in: query
        name: created[start]
        type: string
      - description: Created before
        in: query
        name: created[end]
        type: string
      - description: Order
        in: query
        name: order
        type: string
      - description: Limit
        in: query
        name: limit
        type: string
      - description: Offset
        in: query
        name: offset
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusTasksPage'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get Tasks
      tags:
      - pipeline
      - tasks
  /tasks/{taskID}:
    get:
      description: Получить экземпляр задачи
      operationId: get-task-entity
      parameters:
      - description: work number
        in: path
        name: workNumber
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/handlers.eriusTaskResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get Task
      tags:
      - tasks
    post:
      consumes:
      - application/json
      description: Update task
      operationId: update-task-entity
      parameters:
      - description: work number
        in: path
        name: workNumber
        required: true
        type: string
      - description: Task update data
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/entity.TaskUpdate'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.httpResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Update Task
      tags:
      - tasks
  /tasks/last-by-version/{versionID}:
    get:
      description: Получить последнюю debug-задачу версии сценария
      operationId: get-version-last-debug-task
      parameters:
      - description: Version ID
        in: path
        name: versionID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusTask'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get last debug task for version
      tags:
      - tasks
  /tasks/pipeline/{pipelineID}:
    get:
      description: Получить задачи по сценарию
      operationId: get-pipeline-tasks
      parameters:
      - description: Pipeline ID
        in: path
        name: pipelineID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusTasks'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get Pipeline Tasks
      tags:
      - pipeline
      - tasks
  /tasks/version/{versionID}:
    get:
      description: Получить задачи по версии сценарию
      operationId: get-version-tasks
      parameters:
      - description: Version ID
        in: path
        name: versionID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/handlers.httpResponse'
            - properties:
                data:
                  $ref: '#/definitions/entity.EriusTasks'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.httpError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handlers.httpError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.httpError'
      summary: Get Version Tasks
      tags:
      - version
      - tasks
swagger: "2.0"
